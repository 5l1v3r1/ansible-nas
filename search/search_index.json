{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"After getting burned by broken FreeNAS updates one too many times, I figured I could do a much better job myself using just a stock Ubuntu install, some clever Ansible config and a bunch of Docker containers. Ansible-NAS was born! Features An awesome dashboard to your home server (Heimdall) Any number of Samba shares for you to store your stuff A BitTorrent client Various media management tools - Sonarr, Sickchill, CouchPotato, Radarr Media streaming via Plex, Emby or MiniDLNA Music streaming with Airsonic A Dropbox replacement via Nextcloud Various ways to see stats about your NAS - Glances, dashboards in Grafana A backup tool - allows scheduled backups to Amazon S3, OneDrive, Dropbox etc An IRC bouncer Source control with Gitea SSL secured external access to some applications via Traefik A Docker host with Portainer management - run anything that's shipped as a Docker container Getting Started Head to installation if you're ready to roll, or to testing if you want to spin up a test Virtual Machine first. Once you're done, check out the post-installation steps. If this is all very confusing, there is also an overview of the project and what is required for complete beginners.","title":"Home"},{"location":"#features","text":"An awesome dashboard to your home server (Heimdall) Any number of Samba shares for you to store your stuff A BitTorrent client Various media management tools - Sonarr, Sickchill, CouchPotato, Radarr Media streaming via Plex, Emby or MiniDLNA Music streaming with Airsonic A Dropbox replacement via Nextcloud Various ways to see stats about your NAS - Glances, dashboards in Grafana A backup tool - allows scheduled backups to Amazon S3, OneDrive, Dropbox etc An IRC bouncer Source control with Gitea SSL secured external access to some applications via Traefik A Docker host with Portainer management - run anything that's shipped as a Docker container","title":"Features"},{"location":"#getting-started","text":"Head to installation if you're ready to roll, or to testing if you want to spin up a test Virtual Machine first. Once you're done, check out the post-installation steps. If this is all very confusing, there is also an overview of the project and what is required for complete beginners.","title":"Getting Started"},{"location":"contributing/","text":"Contributing Contributing to Ansible-NAS is easy! Add your functionality, then raise a pull request on GitHub. A few things to bear in mind: Restrict pull requests to one piece of functionality or bugfix at a time. Test your new functionality or bugfix using the included tests/test-vagrant.sh script to spin up a test VM. Run ansible-lint against the playbook before committing. (There is a VSCode task set up to run the right command for you) Ensure that your PR only changes files required for your functionality or bugfix. If you're adding a new application: Ensure that the new application is disabled by default. Add a documentation page to docs/applications/ - use an existing application as an example. Add the frontend port to docs/configuration/application_ports.md , ensuring you've not clashed with an existing application.","title":"Contributing"},{"location":"contributing/#contributing","text":"Contributing to Ansible-NAS is easy! Add your functionality, then raise a pull request on GitHub. A few things to bear in mind: Restrict pull requests to one piece of functionality or bugfix at a time. Test your new functionality or bugfix using the included tests/test-vagrant.sh script to spin up a test VM. Run ansible-lint against the playbook before committing. (There is a VSCode task set up to run the right command for you) Ensure that your PR only changes files required for your functionality or bugfix. If you're adding a new application: Ensure that the new application is disabled by default. Add a documentation page to docs/applications/ - use an existing application as an example. Add the frontend port to docs/configuration/application_ports.md , ensuring you've not clashed with an existing application.","title":"Contributing"},{"location":"installation/","text":"You can run Ansible-NAS from the computer you plan to use for your NAS, or from a remote controlling machine. The steps for deployment are exactly the same, just pay attention to editing the inventory file in step 7. Enable the Ubuntu Universe repository: sudo add-apt-repository universe Install Ansible: sudo apt install ansible git clone https://github.com/davestephens/ansible-nas.git && cd ansible-nas Copy group_vars/all.yml.dist to group_vars/all.yml . Open up group_vars/all.yml and follow the instructions there for configuring your Ansible NAS. If you plan to use Transmission with OpenVPN, also copy group_vars/vpn_credentials.yml.dist to group_vars/vpn_credentials.yml and fill in your settings. Copy inventory.dist to inventory and update it. Install the dependent roles: ansible-galaxy install -r requirements.yml (you might need sudo to install Ansible roles) Run the playbook - something like ansible-playbook -i inventory nas.yml -b -K should do you nicely.","title":"Installation"},{"location":"overview/","text":"Ansible-NAS currently assumes you know your way around a server. This page is an overview for absolute NAS beginners so they can decide if it is right for them. The big picture To start off really simple: A NAS ( Network Attached Storage ) is a server mostly for home or other small networks that offers file storage. It's usually a small box that sits in the corner and runs 24/7. These days, a NAS doesn't just only handle files, but also offers other services, for instance video streaming with Plex or Emby . You can buy consumer NAS boxes from various manifacturers where you just have to add the hard drives, or you can configure your own hardware and use open-source software as the operating system. One example of the second variant you'll see mentioned here is FreeNAS . It is based on FreeBSD , which like Linux belongs to the family of Unix-like operating systems. One strength of FreeBSD/FreeNAS is that it includes the powerful ZFS file system ( OpenZFS , to be exact). However, it does not support the Docker containers the way Linux does. Also, the Linux ecosystem is larger. On the other hand, very few Linux distributions include ZFS out of the box because of licensing issues. Ansible-NAS in its default form attempts to have the best of both worlds by using Docker on Linux with ZFS. This is possible because the Ubuntu Linux distribution supports both technologies. As the name says, Ansible-NAS uses Ansible server automation which is usually deployed on big multi-machine enterprise systems, not small home servers the size of a breadbox. Before you take the plunge The commercial NAS vendors try to make setting up and running a NAS as simple and painless as possible - for a fee, obviously. The open-source NAS software providers have lots of resources to help you get started with your own hardware. FreeNAS for instance comes with extensive documentation, good introductions to ZFS and other topics, and a large community to lean on. With Ansible-NAS, at this point at least, you're pretty much on your own. Though there is a Gitter chat room (see support ), you're expected to have some familiarity with the technologies involved and be able to set up the basic stuff yourself. As a to-do list, before you can even install Ansible-NAS, you'll have to: Choose, buy, configure, and test your own hardware . Note that ZFS loves RAM - it will run with 1 GB , but it won't be happy. The ZFS on Linux (ZoL) people recommend at least 8 GB for best performance, but the more, the better. As robust as ZFS is, it assumes the data in memory is correct, so very bad things happen to your data if there is memory corruption. For this reason, it is strongly recommended to use ECC RAM. ZFS also prefers to have the hard drives all to itself. If you're paranoid (a good mindset when dealing with servers), you'll probably want an uninterruptible power supply (UPS) of some sort as well and SMART monitoring for your hard drives. See the FreeNAS hardware requirements as a guideline. Install Ubuntu Server , preferably a Long Term Support (LTS) edition such as 18.04, and keep it updated. You'll probably want to perform other basic setup tasks like hardening SSH and including email notifications. There are various guides for this, but if you're just getting started, you'll probably need a book. Install ZFS and set up storage. This includes creating data sets for various parts of the system, some form of automatic snapshot handling, and possibly automatic backups to another server or an external hard drive. Currently on Linux, it is something of a hassle to use ZFS on the root file system. If you are completely new to ZFS, expect a brutal learning curve. There is a slightly dated (2012) but extensive introduction to ZFS on Linux by Aaron Toponce to get you started, or you can watch this video that introduces the philosophy and big picture of ZFS. After that, you can continue with the actual installation of Ansible-NAS. How to experiment The easiest way to take Ansible-NAS for a spin is in a virtual machine, for instance in VirtualBox . You'll want to create three virtual hard drives for testing: One of the actual NAS, and the two others to create a mirrored ZFS pool. Note because of the RAM requirements of ZFS, you might run into problems with a virtual machine, but this will let you experiment with installing, configuring, and running a complete system.","title":"Overview"},{"location":"overview/#the-big-picture","text":"To start off really simple: A NAS ( Network Attached Storage ) is a server mostly for home or other small networks that offers file storage. It's usually a small box that sits in the corner and runs 24/7. These days, a NAS doesn't just only handle files, but also offers other services, for instance video streaming with Plex or Emby . You can buy consumer NAS boxes from various manifacturers where you just have to add the hard drives, or you can configure your own hardware and use open-source software as the operating system. One example of the second variant you'll see mentioned here is FreeNAS . It is based on FreeBSD , which like Linux belongs to the family of Unix-like operating systems. One strength of FreeBSD/FreeNAS is that it includes the powerful ZFS file system ( OpenZFS , to be exact). However, it does not support the Docker containers the way Linux does. Also, the Linux ecosystem is larger. On the other hand, very few Linux distributions include ZFS out of the box because of licensing issues. Ansible-NAS in its default form attempts to have the best of both worlds by using Docker on Linux with ZFS. This is possible because the Ubuntu Linux distribution supports both technologies. As the name says, Ansible-NAS uses Ansible server automation which is usually deployed on big multi-machine enterprise systems, not small home servers the size of a breadbox.","title":"The big picture"},{"location":"overview/#before-you-take-the-plunge","text":"The commercial NAS vendors try to make setting up and running a NAS as simple and painless as possible - for a fee, obviously. The open-source NAS software providers have lots of resources to help you get started with your own hardware. FreeNAS for instance comes with extensive documentation, good introductions to ZFS and other topics, and a large community to lean on. With Ansible-NAS, at this point at least, you're pretty much on your own. Though there is a Gitter chat room (see support ), you're expected to have some familiarity with the technologies involved and be able to set up the basic stuff yourself. As a to-do list, before you can even install Ansible-NAS, you'll have to: Choose, buy, configure, and test your own hardware . Note that ZFS loves RAM - it will run with 1 GB , but it won't be happy. The ZFS on Linux (ZoL) people recommend at least 8 GB for best performance, but the more, the better. As robust as ZFS is, it assumes the data in memory is correct, so very bad things happen to your data if there is memory corruption. For this reason, it is strongly recommended to use ECC RAM. ZFS also prefers to have the hard drives all to itself. If you're paranoid (a good mindset when dealing with servers), you'll probably want an uninterruptible power supply (UPS) of some sort as well and SMART monitoring for your hard drives. See the FreeNAS hardware requirements as a guideline. Install Ubuntu Server , preferably a Long Term Support (LTS) edition such as 18.04, and keep it updated. You'll probably want to perform other basic setup tasks like hardening SSH and including email notifications. There are various guides for this, but if you're just getting started, you'll probably need a book. Install ZFS and set up storage. This includes creating data sets for various parts of the system, some form of automatic snapshot handling, and possibly automatic backups to another server or an external hard drive. Currently on Linux, it is something of a hassle to use ZFS on the root file system. If you are completely new to ZFS, expect a brutal learning curve. There is a slightly dated (2012) but extensive introduction to ZFS on Linux by Aaron Toponce to get you started, or you can watch this video that introduces the philosophy and big picture of ZFS. After that, you can continue with the actual installation of Ansible-NAS.","title":"Before you take the plunge"},{"location":"overview/#how-to-experiment","text":"The easiest way to take Ansible-NAS for a spin is in a virtual machine, for instance in VirtualBox . You'll want to create three virtual hard drives for testing: One of the actual NAS, and the two others to create a mirrored ZFS pool. Note because of the RAM requirements of ZFS, you might run into problems with a virtual machine, but this will let you experiment with installing, configuring, and running a complete system.","title":"How to experiment"},{"location":"post_installation/","text":"So you've installed Ansible-NAS. Now what? The first thing to do is to configure Heimdall as the dashboard of your new NAS, because most of the applications included come with a web interface. Heimdall lets you create \"apps\" for them which appear as little icons on the screen. To add applications to Heimdall, you'll need the IP address of your NAS. If you don't know it for some reason, you will have to look up using the console with ip a . The entry \"link/ether\", usually the second one after the loopback device, will show the address. Another alternative is to make sure Avahi is installed for zero-configuration networking (mDNS). This will allow you to ssh into your NAS and with the extension .local to your machines name, such as ssh tardis.local . Then you can use the ip a command again. Next, you need the application's port, which you can look up in the list of ports . You can test the combination of address and port in your browser by typing them joined by a colon. For instance, for Glances on a machine with the IPv4 address 192.168.1.2, the full address would be http://192.168.1.2:61208 . Once you are sure it works, use this address and port combination when creating the Heimdall icon. Glances and Portainer are probably the two applications you want to add to Heimdall first, so you can see what is happening on the NAS. Note that Portainer will ask for your admin password. After that, it depends on what you have installed - see the listing for individual applications for more information.","title":"Post installation"},{"location":"support/","text":"Support Getting support for Ansible-NAS is easy! Gitter.im Ansible-NAS has its own Gitter chat room. davestephens hangs out there as well as a few existing users. Come say hi! GitHub Issues Raise an issue , using the supplied template to provide as much information as possible.","title":"Support"},{"location":"support/#support","text":"Getting support for Ansible-NAS is easy!","title":"Support"},{"location":"support/#gitterim","text":"Ansible-NAS has its own Gitter chat room. davestephens hangs out there as well as a few existing users. Come say hi!","title":"Gitter.im"},{"location":"support/#github-issues","text":"Raise an issue , using the supplied template to provide as much information as possible.","title":"GitHub Issues"},{"location":"testing/","text":"Vagrant A Vagrant Vagrantfile and launch script ( tests/test-vagrant.sh ) are provided to spin up a testing VM. The config in tests/test.yml is used by the script to override any existing config in group_vars/all.yml . By default the VM will be available on 172.30.1.5. If everything has worked correctly after running tests/test-vagrant.sh , you should be able to connect to Heimdall on http://172.30.1.5:10080. After making changes to the playbook, you can apply them to the running VM by running vagrant provision . Once you're done testing, destroy the VM with vagrant destroy . Travis CI Travis CI runs some sanity checks against branches once pushed to GitHub. These can be viewed here . ansible-lint ansible-lint is run as part of the CI (and VSCode tasks are provided) to ensure the playbook confirms to some sort of standard! You may or may not agree with all of the rules, but using it keeps things nice and consistent. Syntax Checking ansible-playbook --syntax-check is run against nas.yml to ensure nothing is majorly broken.","title":"Testing"},{"location":"testing/#vagrant","text":"A Vagrant Vagrantfile and launch script ( tests/test-vagrant.sh ) are provided to spin up a testing VM. The config in tests/test.yml is used by the script to override any existing config in group_vars/all.yml . By default the VM will be available on 172.30.1.5. If everything has worked correctly after running tests/test-vagrant.sh , you should be able to connect to Heimdall on http://172.30.1.5:10080. After making changes to the playbook, you can apply them to the running VM by running vagrant provision . Once you're done testing, destroy the VM with vagrant destroy .","title":"Vagrant"},{"location":"testing/#travis-ci","text":"Travis CI runs some sanity checks against branches once pushed to GitHub. These can be viewed here .","title":"Travis CI"},{"location":"testing/#ansible-lint","text":"ansible-lint is run as part of the CI (and VSCode tasks are provided) to ensure the playbook confirms to some sort of standard! You may or may not agree with all of the rules, but using it keeps things nice and consistent.","title":"ansible-lint"},{"location":"testing/#syntax-checking","text":"ansible-playbook --syntax-check is run against nas.yml to ensure nothing is majorly broken.","title":"Syntax Checking"},{"location":"upgrading/","text":"Upgrading Pull the latest Ansible-NAS repo, merge any new config sections from group_vars/all.yml.dist into your group_vars/all.yml , then run the playbook.","title":"Upgrading"},{"location":"upgrading/#upgrading","text":"Pull the latest Ansible-NAS repo, merge any new config sections from group_vars/all.yml.dist into your group_vars/all.yml , then run the playbook.","title":"Upgrading"},{"location":"applications/airsonic/","text":"Airsonic Homepage: https://airsonic.github.io/ Airsonic is a free, web-based media streamer, providing ubiquitous access to your music. Use it to share your music with friends, or to listen to your own music while at work. You can stream to multiple players simultaneously, for instance to one player in your kitchen and another in your living room Usage Set airsonic_enabled: true in your group_vars/all.yml file. The Airsonic web interface can be found at http://ansible_nas_host_or_ip:4040. Specific Configuration The default username and password is admin - you'll need to change this immediately after logging in.","title":"Airsonic"},{"location":"applications/airsonic/#airsonic","text":"Homepage: https://airsonic.github.io/ Airsonic is a free, web-based media streamer, providing ubiquitous access to your music. Use it to share your music with friends, or to listen to your own music while at work. You can stream to multiple players simultaneously, for instance to one player in your kitchen and another in your living room","title":"Airsonic"},{"location":"applications/airsonic/#usage","text":"Set airsonic_enabled: true in your group_vars/all.yml file. The Airsonic web interface can be found at http://ansible_nas_host_or_ip:4040.","title":"Usage"},{"location":"applications/airsonic/#specific-configuration","text":"The default username and password is admin - you'll need to change this immediately after logging in.","title":"Specific Configuration"},{"location":"applications/bitwarden/","text":"Bitwarden(_rs) Password Management Homepage: https://github.com/dani-garcia/bitwarden_rs Bitwarden: https://bitwarden.com/ This is a Bitwarden server API implementation written in Rust compatible with upstream Bitwarden clients*, perfect for self-hosted deployment where running the official resource-heavy service might not be ideal. Usage Set bitwarden_enabled: true in your group_vars/all.yml file. Specific Configuration Make sure you set your admin token! It is bitwarden_admin_token in group_vars/all.yml file. The string you put here will be the login to the admin section of your bitwarden installation (https://bitwarden.ansiblenasdomain.tld/admin). This token can be anything, but it's recommended to use a long, randomly generated string of characters, for example running: openssl rand -base64 48 . To create a user, you need to set bitwarden_allow_signups to true in your all.yml , and re-run the playbook to reprovision the container. Once you've created your users, set bitwarden_allow_signups back to false and run again. For speed you can target just Bitwarden by appending -t bitwarden to your ansible-playbook command.","title":"Bitwarden(_rs) Password Management"},{"location":"applications/bitwarden/#bitwarden_rs-password-management","text":"Homepage: https://github.com/dani-garcia/bitwarden_rs Bitwarden: https://bitwarden.com/ This is a Bitwarden server API implementation written in Rust compatible with upstream Bitwarden clients*, perfect for self-hosted deployment where running the official resource-heavy service might not be ideal.","title":"Bitwarden(_rs) Password Management"},{"location":"applications/bitwarden/#usage","text":"Set bitwarden_enabled: true in your group_vars/all.yml file.","title":"Usage"},{"location":"applications/bitwarden/#specific-configuration","text":"Make sure you set your admin token! It is bitwarden_admin_token in group_vars/all.yml file. The string you put here will be the login to the admin section of your bitwarden installation (https://bitwarden.ansiblenasdomain.tld/admin). This token can be anything, but it's recommended to use a long, randomly generated string of characters, for example running: openssl rand -base64 48 . To create a user, you need to set bitwarden_allow_signups to true in your all.yml , and re-run the playbook to reprovision the container. Once you've created your users, set bitwarden_allow_signups back to false and run again. For speed you can target just Bitwarden by appending -t bitwarden to your ansible-playbook command.","title":"Specific Configuration"},{"location":"applications/cloudflare_ddns/","text":"Cloudflare Dynamic DNS Updater Homepage: https://github.com/joshuaavalon/docker-cloudflare Cloudflare: https://www.cloudflare.com If you want your Ansible-NAS accessible externally then you'll need a domain name. You'll also need to set a wildcard host A record to point to your static IP, or enable this container to automatically update Cloudflare with your dynamic IP address. Usage Set cloudflare_ddns_enabled: true in your group_vars/all.yml file. Specific Configuration Make sure you set your Cloudflare login, domain and API key details within your group_vars/all.yml file.","title":"Cloudflare Dynamic DNS Updater"},{"location":"applications/cloudflare_ddns/#cloudflare-dynamic-dns-updater","text":"Homepage: https://github.com/joshuaavalon/docker-cloudflare Cloudflare: https://www.cloudflare.com If you want your Ansible-NAS accessible externally then you'll need a domain name. You'll also need to set a wildcard host A record to point to your static IP, or enable this container to automatically update Cloudflare with your dynamic IP address.","title":"Cloudflare Dynamic DNS Updater"},{"location":"applications/cloudflare_ddns/#usage","text":"Set cloudflare_ddns_enabled: true in your group_vars/all.yml file.","title":"Usage"},{"location":"applications/cloudflare_ddns/#specific-configuration","text":"Make sure you set your Cloudflare login, domain and API key details within your group_vars/all.yml file.","title":"Specific Configuration"},{"location":"applications/get_iplayer/","text":"get_iplayer Homepage: https://github.com/get-iplayer/get_iplayer Downloads TV and radio programmes from BBC iPlayer. Usage Set get_iplayer_enabled: true in your group_vars/all.yml file. The get_iplayer web interface can be found at http://ansible_nas_host_or_ip:8182.","title":"get_iplayer"},{"location":"applications/get_iplayer/#get_iplayer","text":"Homepage: https://github.com/get-iplayer/get_iplayer Downloads TV and radio programmes from BBC iPlayer.","title":"get_iplayer"},{"location":"applications/get_iplayer/#usage","text":"Set get_iplayer_enabled: true in your group_vars/all.yml file. The get_iplayer web interface can be found at http://ansible_nas_host_or_ip:8182.","title":"Usage"},{"location":"applications/jackett/","text":"Jackett Homepage: https://github.com/Jackett/Jackett Jackett works as a proxy server: it translates queries from apps (Sonarr, Radarr, SickRage, CouchPotato, Mylar, DuckieTV, qBittorrent, Nefarious etc) into tracker-site-specific http queries, parses the html response, then sends results back to the requesting software. This allows for getting recent uploads (like RSS) and performing searches. Jackett is a single repository of maintained indexer scraping & translation logic - removing the burden from other apps. Usage Set jackett: true in your group_vars/all.yml file. The Jackett web interface can be found at http://ansible_nas_host_or_ip:9117.","title":"Jackett"},{"location":"applications/jackett/#jackett","text":"Homepage: https://github.com/Jackett/Jackett Jackett works as a proxy server: it translates queries from apps (Sonarr, Radarr, SickRage, CouchPotato, Mylar, DuckieTV, qBittorrent, Nefarious etc) into tracker-site-specific http queries, parses the html response, then sends results back to the requesting software. This allows for getting recent uploads (like RSS) and performing searches. Jackett is a single repository of maintained indexer scraping & translation logic - removing the burden from other apps.","title":"Jackett"},{"location":"applications/jackett/#usage","text":"Set jackett: true in your group_vars/all.yml file. The Jackett web interface can be found at http://ansible_nas_host_or_ip:9117.","title":"Usage"},{"location":"applications/minidlna/","text":"MiniDLNA Homepage: https://sourceforge.net/projects/minidlna/ MiniDLNA is server software with the aim of being fully compliant with DLNA/UPnP clients. The MiniDNLA daemon serves media files (music, pictures, and video) to clients on a network. Example clients include applications such as Totem and Kodi, and devices such as portable media players, Smartphones, Televisions, and gaming systems (such as PS3 and Xbox 360). Usage Set minidlna_enabled: true in your group_vars/all.yml file. The very basic MiniDLNA web interface can be found at http://ansible_nas_host_or_ip:8201.","title":"MiniDLNA"},{"location":"applications/minidlna/#minidlna","text":"Homepage: https://sourceforge.net/projects/minidlna/ MiniDLNA is server software with the aim of being fully compliant with DLNA/UPnP clients. The MiniDNLA daemon serves media files (music, pictures, and video) to clients on a network. Example clients include applications such as Totem and Kodi, and devices such as portable media players, Smartphones, Televisions, and gaming systems (such as PS3 and Xbox 360).","title":"MiniDLNA"},{"location":"applications/minidlna/#usage","text":"Set minidlna_enabled: true in your group_vars/all.yml file. The very basic MiniDLNA web interface can be found at http://ansible_nas_host_or_ip:8201.","title":"Usage"},{"location":"applications/miniflux/","text":"Miniflux Homepage: https://miniflux.app/ Miniflux is a minimalist and opinionated feed reader. Usage Set miniflux_enabled: true in your group_vars/all.yml file. The Miniflux web interface can be found at http://ansible_nas_host_or_ip:8070, the default username is admin and password supersecure . Specific Configuration An admin user will be created with the username and password of miniflux_admin_username and miniflux_admin_password respectively. These can be found in the Miniflux section within all.yml.dist .","title":"Miniflux"},{"location":"applications/miniflux/#miniflux","text":"Homepage: https://miniflux.app/ Miniflux is a minimalist and opinionated feed reader.","title":"Miniflux"},{"location":"applications/miniflux/#usage","text":"Set miniflux_enabled: true in your group_vars/all.yml file. The Miniflux web interface can be found at http://ansible_nas_host_or_ip:8070, the default username is admin and password supersecure .","title":"Usage"},{"location":"applications/miniflux/#specific-configuration","text":"An admin user will be created with the username and password of miniflux_admin_username and miniflux_admin_password respectively. These can be found in the Miniflux section within all.yml.dist .","title":"Specific Configuration"},{"location":"applications/mymediaforalexa/","text":"My Media for Alexa Homepage: https://www.mymediaalexa.com/](https://www.mymediaalexa.com/) My Media lets you stream your music collection to your Amazon Echo or Amazon Dot without having to upload all your music collection to the Cloud. This keeps your music under your control. Usage Set mymediaforalexa_enabled: true in your group_vars/all.yml file. The My Media for Alexa web interface can be found at http://ansible_nas_host_or_ip:52051.","title":"My Media for Alexa"},{"location":"applications/mymediaforalexa/#my-media-for-alexa","text":"Homepage: https://www.mymediaalexa.com/](https://www.mymediaalexa.com/) My Media lets you stream your music collection to your Amazon Echo or Amazon Dot without having to upload all your music collection to the Cloud. This keeps your music under your control.","title":"My Media for Alexa"},{"location":"applications/mymediaforalexa/#usage","text":"Set mymediaforalexa_enabled: true in your group_vars/all.yml file. The My Media for Alexa web interface can be found at http://ansible_nas_host_or_ip:52051.","title":"Usage"},{"location":"applications/thelounge/","text":"The Lounge Homepage: https://thelounge.chat/ The Lounge is a self-hosted web IRC client. Usage Set thelounge_enabled: true in your group_vars/all.yml file. The Lounge web interface can be found at http://ansible_nas_host_or_ip:9000. Specific Configuration The default username and password is admin . Change this once you've logged in!","title":"The Lounge"},{"location":"applications/thelounge/#the-lounge","text":"Homepage: https://thelounge.chat/ The Lounge is a self-hosted web IRC client.","title":"The Lounge"},{"location":"applications/thelounge/#usage","text":"Set thelounge_enabled: true in your group_vars/all.yml file. The Lounge web interface can be found at http://ansible_nas_host_or_ip:9000.","title":"Usage"},{"location":"applications/thelounge/#specific-configuration","text":"The default username and password is admin . Change this once you've logged in!","title":"Specific Configuration"},{"location":"applications/timemachine/","text":"Time Machine Apple docs: https://support.apple.com/en-us/HT201250 Docker image: https://github.com/mbentley/docker-timemachine Time Machine is an application that allows you to backup files from your Mac. Usage Set timemachine_enabled: true in your group_vars/all.yml file. Specific Configuration timemachine_data_directory The absolute path on Ansible NAS where the backup files will be stored timemachine_volume_size_limit The maximum amount of space Time Machine can use for the backups in units of MiB. Set it to 0 for no limit. timemachine_share_name The name of the share as it will appear in the Time Machine application. Default is 'TimeMachine' timemachine_password The password used to access the share. Default is 'timemachine' timemachine_log_level The verbosity of the logs. 'Error' is the default.","title":"Time Machine"},{"location":"applications/timemachine/#time-machine","text":"Apple docs: https://support.apple.com/en-us/HT201250 Docker image: https://github.com/mbentley/docker-timemachine Time Machine is an application that allows you to backup files from your Mac.","title":"Time Machine"},{"location":"applications/timemachine/#usage","text":"Set timemachine_enabled: true in your group_vars/all.yml file.","title":"Usage"},{"location":"applications/timemachine/#specific-configuration","text":"timemachine_data_directory The absolute path on Ansible NAS where the backup files will be stored timemachine_volume_size_limit The maximum amount of space Time Machine can use for the backups in units of MiB. Set it to 0 for no limit. timemachine_share_name The name of the share as it will appear in the Time Machine application. Default is 'TimeMachine' timemachine_password The password used to access the share. Default is 'timemachine' timemachine_log_level The verbosity of the logs. 'Error' is the default.","title":"Specific Configuration"},{"location":"applications/traefik/","text":"Traefik Homepage: https://traefik.io Traefik is used to provide external access to your Ansible-NAS box. Additionally, Traefik will automatically request and renew SSL certificates for you. You can configure which applications are available externally by enabling the <application_name>_available_externally setting for each application in the Advanced Settings section of your all.yml . See External Access for more info. Usage Set traefik_enabled: true in your group_vars/all.yml file. Traefik's web interface can be found at http://ansible_nas_host_or_ip:8083. Specific Configuration You'll need to map port 80 and 443 from your router to your Ansible-NAS box. A quick search should reveal instruction for your model of router.","title":"Traefik"},{"location":"applications/traefik/#traefik","text":"Homepage: https://traefik.io Traefik is used to provide external access to your Ansible-NAS box. Additionally, Traefik will automatically request and renew SSL certificates for you. You can configure which applications are available externally by enabling the <application_name>_available_externally setting for each application in the Advanced Settings section of your all.yml . See External Access for more info.","title":"Traefik"},{"location":"applications/traefik/#usage","text":"Set traefik_enabled: true in your group_vars/all.yml file. Traefik's web interface can be found at http://ansible_nas_host_or_ip:8083.","title":"Usage"},{"location":"applications/traefik/#specific-configuration","text":"You'll need to map port 80 and 443 from your router to your Ansible-NAS box. A quick search should reveal instruction for your model of router.","title":"Specific Configuration"},{"location":"applications/transmission/","text":"Transmission Homepage: https://transmissionbt.com/ Transmission is a free BitTorrent client. Two versions are provided - one that tunnels through a VPN and one that connects directly. Usage Set transmission_enabled: true , or transmission_with_openvpn_enabled: true in your group_vars/all.yml file. Transmission's web interface can be found at http://ansible_nas_host_or_ip:9091 (with VPN) or http://ansible_nas_host_or_ip:9092 (without VPN). Specific Configuration If you enable Tranmission with OpenVPN, you'll need to copy group_vars/vpn_credentials.yml.dist to group_vars/vpn_credentials.yml and fill in your settings.","title":"Transmission"},{"location":"applications/transmission/#transmission","text":"Homepage: https://transmissionbt.com/ Transmission is a free BitTorrent client. Two versions are provided - one that tunnels through a VPN and one that connects directly.","title":"Transmission"},{"location":"applications/transmission/#usage","text":"Set transmission_enabled: true , or transmission_with_openvpn_enabled: true in your group_vars/all.yml file. Transmission's web interface can be found at http://ansible_nas_host_or_ip:9091 (with VPN) or http://ansible_nas_host_or_ip:9092 (without VPN).","title":"Usage"},{"location":"applications/transmission/#specific-configuration","text":"If you enable Tranmission with OpenVPN, you'll need to copy group_vars/vpn_credentials.yml.dist to group_vars/vpn_credentials.yml and fill in your settings.","title":"Specific Configuration"},{"location":"applications/watchtower/","text":"Watchtower Homepage: https://github.com/v2tec/watchtower A process for watching your Docker containers and automatically udpating and restarting them whenever their base image is refreshed. Usage Set watchtower_enabled: true in your group_vars/all.yml file. Specific Configuration By default Watchtower is configured to check daily at 5am for updates. Various notification options are available, and can be configured by updating watchtower_command in your group_vars/all.yml file. A few examples are provided. The full set of options can be found at the Watchtower GitHub project page .","title":"Watchtower"},{"location":"applications/watchtower/#watchtower","text":"Homepage: https://github.com/v2tec/watchtower A process for watching your Docker containers and automatically udpating and restarting them whenever their base image is refreshed.","title":"Watchtower"},{"location":"applications/watchtower/#usage","text":"Set watchtower_enabled: true in your group_vars/all.yml file.","title":"Usage"},{"location":"applications/watchtower/#specific-configuration","text":"By default Watchtower is configured to check daily at 5am for updates. Various notification options are available, and can be configured by updating watchtower_command in your group_vars/all.yml file. A few examples are provided. The full set of options can be found at the Watchtower GitHub project page .","title":"Specific Configuration"},{"location":"configuration/application_ports/","text":"Application Ports By default, applications can be found on the ports listed below. Application Port Notes Couchpotato 5050 Bitwarden \"hub\" 3012 Web Not. Bitwarden 19080 HTTP Duplicati 8200 Emby 8096 HTTP Emby 8920 HTTPS get_iplayer 8182 Gitea 3001 Web Gitea 222 SSH Glances 61208 SSH Grafana 3000 Guacamole 8090 Heimdall 10080 Jackett 9117 MiniDLNA 8201 Miniflux 8070 MyMediaForAlexa 52051 Netdata 19999 Nextcloud 8080 Plex 32400 Portainer 9000 Radarr 7878 Sickchill 8081 Sonarr 8989 Tautulli 8181 The Lounge 9000 Traefik 8083 Transmission 9091 with VPN Transmission 9092 ZNC 6677","title":"Application Ports"},{"location":"configuration/application_ports/#application-ports","text":"By default, applications can be found on the ports listed below. Application Port Notes Couchpotato 5050 Bitwarden \"hub\" 3012 Web Not. Bitwarden 19080 HTTP Duplicati 8200 Emby 8096 HTTP Emby 8920 HTTPS get_iplayer 8182 Gitea 3001 Web Gitea 222 SSH Glances 61208 SSH Grafana 3000 Guacamole 8090 Heimdall 10080 Jackett 9117 MiniDLNA 8201 Miniflux 8070 MyMediaForAlexa 52051 Netdata 19999 Nextcloud 8080 Plex 32400 Portainer 9000 Radarr 7878 Sickchill 8081 Sonarr 8989 Tautulli 8181 The Lounge 9000 Traefik 8083 Transmission 9091 with VPN Transmission 9092 ZNC 6677","title":"Application Ports"},{"location":"configuration/custom_applications/","text":"Custom Applications Using Portainer Ensure that you have portainer_enabled: true in your group_vars/all.yml file, and have run the playbook so that Portainer is up and running. Hit Portainer on http://ansible_nas_host_or_ip:9000. You can now deploy an 'App Template' or head to 'Containers' and manually enter container configuration. Using a Custom Ansible Task Needs to be docced","title":"Custom Applications"},{"location":"configuration/custom_applications/#custom-applications","text":"","title":"Custom Applications"},{"location":"configuration/custom_applications/#using-portainer","text":"Ensure that you have portainer_enabled: true in your group_vars/all.yml file, and have run the playbook so that Portainer is up and running. Hit Portainer on http://ansible_nas_host_or_ip:9000. You can now deploy an 'App Template' or head to 'Containers' and manually enter container configuration.","title":"Using Portainer"},{"location":"configuration/custom_applications/#using-a-custom-ansible-task","text":"Needs to be docced","title":"Using a Custom Ansible Task"},{"location":"configuration/external_access/","text":"External Access There are a number of steps required to enable external access to the applications running on your NAS: Enable Traefik Domain name and DNS configuration Router configuration Enable specific applications for external access :skull: :skull: :skull: Warning! :skull: :skull: :skull: Enabling access to applications externally does not automatically secure them. If you can access an application from within your own network without a username and password, this will also be the case externally. It is your responsiblity to ensure that applications you enable external access to are secured appropriately! Enable Traefik Traefik routes traffic from ports 80 (HTTP) and 443 (HTTPS) on your Ansible-NAS box to the relevant application, based on hostname. Simply set traefik_enabled: true in your all.yml . By default it listens on ports 80 and 443, but doesn't route any traffic. Domain Name and DNS Configuration Set ansible_nas_domain to the domain name you want to use for your Ansible-NAS. You'll need somewhere to host the DNS for that domain - Cloudflare is a good free solution. Once you have an account and Cloudflare is hosting the DNS for your domain, create a wildcard DNS entry ( *.myawesomedomain.com ) and set it to your current IP address. You then need to enable the Cloudflare Dynamic DNS container ( cloudflare_ddns_enabled: true ) so the wildcard DNS entry for your domain name is updated if/when your ISP issues you a new IP address. Router Configuration You need to map ports 80 and 443 from your router to your Ansible-NAS box. How to do this is entirely dependent on your router (and out of scope of these docs), but if you're using Ansible-NAS then this should be within your skillset. :) Enable Specific Applications Every application has a <application_name>_available_externally setting in the Advanced Settings section of all.yml . Setting this to true will configure Traefik to route <application>.yourdomain.com to the application, making it available externally.","title":"External Access"},{"location":"configuration/external_access/#external-access","text":"There are a number of steps required to enable external access to the applications running on your NAS: Enable Traefik Domain name and DNS configuration Router configuration Enable specific applications for external access","title":"External Access"},{"location":"configuration/external_access/#skull-skull-skull-warning-skull-skull-skull","text":"Enabling access to applications externally does not automatically secure them. If you can access an application from within your own network without a username and password, this will also be the case externally. It is your responsiblity to ensure that applications you enable external access to are secured appropriately!","title":":skull: :skull: :skull: Warning! :skull: :skull: :skull:"},{"location":"configuration/external_access/#enable-traefik","text":"Traefik routes traffic from ports 80 (HTTP) and 443 (HTTPS) on your Ansible-NAS box to the relevant application, based on hostname. Simply set traefik_enabled: true in your all.yml . By default it listens on ports 80 and 443, but doesn't route any traffic.","title":"Enable Traefik"},{"location":"configuration/external_access/#domain-name-and-dns-configuration","text":"Set ansible_nas_domain to the domain name you want to use for your Ansible-NAS. You'll need somewhere to host the DNS for that domain - Cloudflare is a good free solution. Once you have an account and Cloudflare is hosting the DNS for your domain, create a wildcard DNS entry ( *.myawesomedomain.com ) and set it to your current IP address. You then need to enable the Cloudflare Dynamic DNS container ( cloudflare_ddns_enabled: true ) so the wildcard DNS entry for your domain name is updated if/when your ISP issues you a new IP address.","title":"Domain Name and DNS Configuration"},{"location":"configuration/external_access/#router-configuration","text":"You need to map ports 80 and 443 from your router to your Ansible-NAS box. How to do this is entirely dependent on your router (and out of scope of these docs), but if you're using Ansible-NAS then this should be within your skillset. :)","title":"Router Configuration"},{"location":"configuration/external_access/#enable-specific-applications","text":"Every application has a <application_name>_available_externally setting in the Advanced Settings section of all.yml . Setting this to true will configure Traefik to route <application>.yourdomain.com to the application, making it available externally.","title":"Enable Specific Applications"},{"location":"configuration/nfs_exports/","text":"NFS Exports Ansible-NAS uses the awesome geerlingguy.nfs Ansible role to configure NFS exports. More info on configuring NFS exports can be found here . NFS Examples Ansible-NAS shares are defined in the nfs_exports section within group_vars/all.yml . The example provided will allow anyone to read the data in {{ nfs_shares_root }}/public on your Ansible-NAS box. Permissions NFS \"exports\" (an equivalent of a Samba share) are permissioned differently to Samba shares. Samba shares are permissioned with users and groups, and NFS exports are permissioned by the host wanting to access them, and then usual Linux permissions are applied to the files and directories within there. As mentioned above, the example will allow any computer on your network to read and write to the export.","title":"NFS Exports"},{"location":"configuration/nfs_exports/#nfs-exports","text":"Ansible-NAS uses the awesome geerlingguy.nfs Ansible role to configure NFS exports. More info on configuring NFS exports can be found here .","title":"NFS Exports"},{"location":"configuration/nfs_exports/#nfs-examples","text":"Ansible-NAS shares are defined in the nfs_exports section within group_vars/all.yml . The example provided will allow anyone to read the data in {{ nfs_shares_root }}/public on your Ansible-NAS box.","title":"NFS Examples"},{"location":"configuration/nfs_exports/#permissions","text":"NFS \"exports\" (an equivalent of a Samba share) are permissioned differently to Samba shares. Samba shares are permissioned with users and groups, and NFS exports are permissioned by the host wanting to access them, and then usual Linux permissions are applied to the files and directories within there. As mentioned above, the example will allow any computer on your network to read and write to the export.","title":"Permissions"},{"location":"configuration/samba_shares/","text":"Samba Shares Ansible-NAS uses the awesome bertvv.samba Ansible role to configure Samba - check out the project page for the many different options you can use to configure a share. Share Examples Ansible-NAS shares are defined in the samba_shares section within group_vars/all.yml . The examples provided are \"public\" shares that anyone on your LAN can read and write to. File Permissions Ansible-NAS creates an ansible-nas user and group on your server, which Samba will use to access the data in your shares. New data created will be permissioned correctly. However, if you have existing data this will need to be repermissioned so that Samba can read and serve it. An playbook is provided to do this for you - permission_data.yml . It is separated from the main Ansible-NAS playbook due to the time it can take to run with large amounts of data. You should only need to run this once.","title":"Samba Shares"},{"location":"configuration/samba_shares/#samba-shares","text":"Ansible-NAS uses the awesome bertvv.samba Ansible role to configure Samba - check out the project page for the many different options you can use to configure a share.","title":"Samba Shares"},{"location":"configuration/samba_shares/#share-examples","text":"Ansible-NAS shares are defined in the samba_shares section within group_vars/all.yml . The examples provided are \"public\" shares that anyone on your LAN can read and write to.","title":"Share Examples"},{"location":"configuration/samba_shares/#file-permissions","text":"Ansible-NAS creates an ansible-nas user and group on your server, which Samba will use to access the data in your shares. New data created will be permissioned correctly. However, if you have existing data this will need to be repermissioned so that Samba can read and serve it. An playbook is provided to do this for you - permission_data.yml . It is separated from the main Ansible-NAS playbook due to the time it can take to run with large amounts of data. You should only need to run this once.","title":"File Permissions"}]}